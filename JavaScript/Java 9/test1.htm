<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Тест 1</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <ul id="test">
      <li class="question">
        Может ли мужчина жениться на сестре своей вдовы?
        <ul>
          <li>
            <label
              ><input type="radio" name="question1" />Может, если сестра
              согласится</label
            >
          </li>
          <li>
            <label
              ><input type="radio" name="question1" />Может, если вдова не
              против</label
            >
          </li>
          <li>
            <label
              ><input type="radio" name="question1" data-true />Не может</label
            >
          </li>
        </ul>
      </li>
      <li class="question">
        Вы заходите в малознакомую комнату. В ней темно, но есть две лампы:
        газовая и бензиновая. Что вы зажжёте в первую очередь?
        <ul>
          <li>
            <label
              ><input type="radio" name="question2" data-true />Спичку</label
            >
          </li>
          <li>
            <label><input type="radio" name="question2" />Свет</label>
          </li>
          <li>
            <label><input type="radio" name="question2" />Телевизор</label>
          </li>
        </ul>
      </li>
      <li class="question">
        У Ахмеда было десять овец. Все, кроме девяти, cдохли. Сколько осталось
        овец?
        <ul>
          <li>
            <label
              ><input type="radio" name="question3" />Одна! Проклятый овечий
              грипп!</label
            >
          </li>
          <li>
            <label
              ><input type="radio" name="question3" data-true />Девять</label
            >
          </li>
          <li>
            <label><input type="radio" name="question3" />Десять</label>
          </li>
        </ul>
      </li>
      <li class="question">
        Есть ли 7 ноября в Австралии?
        <ul>
          <li>
            <label
              ><input type="radio" name="question4" />Есть, только
              перевёрнутое</label
            >
          </li>
          <li>
            <label
              ><input type="radio" name="question4" data-true />Есть, что они,
              не люди там, что ли</label
            >
          </li>
          <li>
            <label
              ><input type="radio" name="question4" />Нет, зачем оно там, если
              не отмечается День Октябрьской революции</label
            >
          </li>
        </ul>
      </li>
      <li class="question">
        Отец с сыном попали в катастрофу. Отец скончался в госпитале. К сыну в
        палату заходит хирург и говорит, показывая на него: «Это мой сын». Могут
        ли эти слова быть правдой?
        <ul>
          <li>
            <label
              ><input type="radio" name="question5" />Нет, шарлатан
              какой-то!</label
            >
          </li>
          <li>
            <label
              ><input type="radio" name="question5" />Нечего болтать, пускай
              лечит лучше!</label
            >
          </li>
          <li>
            <label
              ><input type="radio" name="question5" data-true />Да, чего только
              в жизни не бывает</label
            >
          </li>
        </ul>
      </li>
      <li class="question">
        На руках десять пальцев. Сколько пальцев на десяти руках?
        <ul>
          <li>
            <label><input type="radio" name="question6" />Десять</label>
          </li>
          <li>
            <label
              ><input type="radio" name="question6" data-true />Пятьдесят</label
            >
          </li>
          <li>
            <label><input type="radio" name="question6" />Сто</label>
          </li>
        </ul>
      </li>
      <li class="question">
        Бревно нужно распилить на двенадцать частей. Сколько потребуется
        распилов?
        <ul>
          <li>
            <label
              ><input
                type="radio"
                name="question7"
                data-true
              />Одиннадцать</label
            >
          </li>
          <li>
            <label><input type="radio" name="question7" />Двенадцать</label>
          </li>
          <li>
            <label><input type="radio" name="question7" />Тринадцать</label>
          </li>
        </ul>
      </li>
      <li class="question">
        Сколько девяток встречается в ряду чисел от 1 до 100?
        <ul>
          <li>
            <label><input type="radio" name="question8" />Девять</label>
          </li>
          <li>
            <label
              ><input
                type="radio"
                name="question8"
                data-true
              />Одиннадцать</label
            >
          </li>
          <li>
            <label><input type="radio" name="question8" />Двадцать</label>
          </li>
        </ul>
      </li>
      <li class="question">
        Врач прописал больному делать по одному уколу каждые полчаса. Сколько
        потребуется времени, чтобы сделать три укола?
        <ul>
          <li>
            <label><input type="radio" name="question9" data-true />Час</label>
          </li>
          <li>
            <label><input type="radio" name="question9" />Полтора часа</label>
          </li>
          <li>
            <label
              ><input type="radio" name="question9" />Не буду делать никаких
              уколов! Пусть он сам делает и за временем следит</label
            >
          </li>
        </ul>
      </li>
      <li class="question">
        Обычно месяц заканчивается 30-м или 31-м числом. В каком месяце есть
        29-е число?
        <ul>
          <li>
            <label
              ><input type="radio" name="question10" />Во всех месяцах, если год
              не високосный</label
            >
          </li>
          <li>
            <label
              ><input type="radio" name="question10" />Во всех месяцах, кроме
              февраля</label
            >
          </li>
          <li>
            <label
              ><input type="radio" name="question10" data-true />Во всех
              месяцах, если год високосный</label
            >
          </li>
        </ul>
      </li>
    </ul>
    <input type="button" id="check" value="Проверить" />
    <script>
      var checkEl = document.getElementById("check");
      var questionsEl = document.getElementsByClassName("question");
      var result = [];
      checkEl.addEventListener("click", checkAnswers);
      function checkAnswers() {
        for (var i = 0; i < questionsEl.length; i++) {
          var answers = questionsEl[i].querySelectorAll("input[type=radio]");
          result.push(checkOneAnswer(answers));
        }
        printResult();
        result = [];
      }
      function checkOneAnswer(answers) {
        var result = null;
        var noAnswer = true;
        for (var i = 0; i < answers.length; i++) {
          var isTrue = answers[i].getAttribute("data-true") !== null;
          if (answers[i].checked) {
            noAnswer = false;
            if (isTrue) {
              result = true;
            } else {
              result = false;
            }
          } else {
            if (isTrue) {
              result = false;
            }
          }
        }
        if (noAnswer) {
          result = null;
        }
        return result;
      }
      function printResult() {
        var trueAnswers = 0;
        var falseAnswers = 0;
        var noAnswers = 0;
        for (var i = 0; i < result.length; i++) {
          if (result[i] === true) {
            trueAnswers++;
          } else if (result[i] === false) {
            falseAnswers++;
          } else if (result[i] === null) {
            noAnswers++;
          }
        }
        var all = trueAnswers + falseAnswers + noAnswers;
        var percent = Math.round((trueAnswers / all) * 100);
        var msg =
          "Правильных ответов: " +
          trueAnswers +
          " (" +
          percent +
          "%)\n" +
          "Неправильных ответов: " +
          falseAnswers +
          "\n" +
          "Без ответов: " +
          noAnswers +
          "\n";
        alert(msg);
      }
    </script>
  </body>
</html>
